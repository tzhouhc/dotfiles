#!/usr/bin/env zsh

source $HOME/.zsh/base.zsh

CHROME_HIST=/tmp/chrome_history.db
cp "$HOME/Library/Application Support/Google/Chrome/Default/History" $CHROME_HIST

hist=$(
sqlite3 -header -csv $CHROME_HIST "SELECT urls.url
  FROM urls, visits
  WHERE urls.id = visits.url
  GROUP BY urls.title, urls.url
  ORDER BY visits.visit_time DESC"
)
result=$(echo $hist | fzf --height 100%)

if [[ -n "${result}" ]]; then
  open "${result}"
fi

